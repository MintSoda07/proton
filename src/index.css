/* =========================
   Proton UI — Full CSS
   ========================= */

/* Tailwind (v4): utilities import */
@import "tailwindcss";

/* --------- Base Reset (safe) --------- */
*,
*::before,
*::after { box-sizing: border-box; }
html, body, #root { height: 100%; }
html { -webkit-text-size-adjust: 100%; }
body { margin: 0; }

/* --------- Design Tokens --------- */
:root {
  --base: #0B0F14;
  --accent: #00E0FF;
  --violet: #8B5CF6;
  --text: #FFFFFF;
  /* HSL value for opacity utilities if needed */
  --muted: 228 8% 84%;

  /* Scrollbar (Chromium/Safari) */
  --sb-w: 12px;
  --sb-r: 10px;
  --sb-track: color-mix(in oklab, white 3%, transparent);
  --sb-thumb: color-mix(in oklab, var(--accent) 55%, transparent);
  --sb-thumb-hover: color-mix(in oklab, var(--violet) 60%, transparent);
}

/* --------- Page Background --------- */
body {
  color: var(--text);
  background:
    radial-gradient(1200px 800px at 70% -10%, color-mix(in oklab, var(--accent) 8%, transparent), transparent),
    radial-gradient(900px 600px at -10% 20%, color-mix(in oklab, var(--violet) 8%, transparent), transparent),
    var(--base);
}

/* --------- Helpers (colors/layout/a11y) --------- */
.bg-base { background-color: var(--base); }
.text-accent { color: var(--accent); }
.text-violet { color: var(--violet); }
.bg-accent { background-color: var(--accent); }
.bg-violet { background-color: var(--violet); }
.gradient-accent { background-image: linear-gradient(90deg, var(--accent), var(--violet)); }

.container-proton {
  width: 100%;
  max-width: 1120px;
  margin-inline: auto;
  padding-inline: 1rem;
}

.sr-only {
  position: absolute; width: 1px; height: 1px;
  padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0);
  white-space: nowrap; border: 0;
}

/* Subtle border ring */
.ring-accent-20 {
  box-shadow: 0 0 0 1px color-mix(in oklab, var(--accent) 20%, transparent);
}

/* --------- Focus Ring --------- */
.focus-ring { outline: none; box-shadow: 0 0 0 0px transparent; }
.focus-ring:focus-visible {
  box-shadow: 0 0 0 3px color-mix(in oklab, var(--accent) 45%, transparent);
  border-radius: 12px;
}

/* --------- Surfaces --------- */
.glass {
  background: color-mix(in oklab, white 7%, transparent);
  border: 1px solid color-mix(in oklab, white 12%, transparent);
  backdrop-filter: blur(10px);
}
.card {
  border: 1px solid color-mix(in oklab, white 12%, transparent);
  background: color-mix(in oklab, white 5%, transparent);
  border-radius: 14px;
}

/* --------- Buttons --------- */
.btn {
  /* display:inline-flex;  <-- 의도적으로 미사용 (md:hidden 등과 충돌 방지) */
  align-items: center;
  justify-content: center;
  padding: 10px 16px;
  border-radius: 12px;
  font-weight: 600;
  border: 1px solid color-mix(in oklab, white 14%, transparent);
  transition: transform .12s ease, box-shadow .2s ease, background .2s ease, border-color .2s ease;
  color: var(--text);
  background: color-mix(in oklab, white 4%, transparent);
}
.btn:hover { transform: translateY(-1px); }
.btn:active { transform: translateY(0); }

.btn-primary {
  background: linear-gradient(90deg, var(--accent), var(--violet));
  color: #0B0F14;
  border-color: transparent;
}
.btn-ghost {
  background: color-mix(in oklab, white 4%, transparent);
  color: white;
}
.btn-ghost:hover { background: color-mix(in oklab, white 8%, transparent); }

/* =========================
   Refresh Add-ons
   ========================= */

/* --------- Scrollbar (WebKit) --------- */
*::-webkit-scrollbar { width: var(--sb-w); height: var(--sb-w); }
*::-webkit-scrollbar-track {
  background: var(--sb-track);
  border-radius: var(--sb-r);
  border: 1px solid color-mix(in oklab, white 6%, transparent);
  margin: 4px;
}
*::-webkit-scrollbar-thumb {
  background:
    linear-gradient(180deg,
      color-mix(in oklab, var(--accent) 75%, transparent),
      color-mix(in oklab, var(--violet) 65%, transparent));
  border: 3px solid transparent;
  background-clip: padding-box;
  border-radius: var(--sb-r);
  box-shadow: inset 0 0 0 1px color-mix(in oklab, white 14%, transparent);
}
*::-webkit-scrollbar-thumb:hover {
  background:
    linear-gradient(180deg, var(--sb-thumb-hover), color-mix(in oklab, var(--accent) 70%, transparent));
}
/* Firefox */
* { scrollbar-width: thin; scrollbar-color: var(--sb-thumb) var(--sb-track); }

/* --------- Inputs --------- */
.input-proton {
  width: 100%;
  padding: 10px 12px;
  border-radius: 12px;
  color: var(--text);
  background: color-mix(in oklab, white 5%, transparent);
  border: 1px solid color-mix(in oklab, white 12%, transparent);
  transition: border-color .2s ease, box-shadow .2s ease, background .2s ease;
}
.input-proton::placeholder {
  color: color-mix(in oklab, var(--text) 55%, transparent);
}
.input-proton:focus {
  outline: none;
  border-color: color-mix(in oklab, var(--accent) 48%, transparent);
  box-shadow: 0 0 0 3px color-mix(in oklab, var(--accent) 22%, transparent);
  background: color-mix(in oklab, white 7%, transparent);
}

/* --------- Select (native) --------- */
.select-proton {
  -webkit-appearance: none;
  appearance: none;
  width: 100%;
  padding: 10px 40px 10px 12px;
  border-radius: 12px;
  color: var(--text);
  background:
    linear-gradient(90deg, color-mix(in oklab, white 5%, transparent), color-mix(in oklab, white 3%, transparent)),
    url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 24 24' fill='none' stroke='%2300E0FF' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='6 9 12 15 18 9'/></svg>") no-repeat right 12px center / 18px 18px;
  border: 1px solid color-mix(in oklab, white 12%, transparent);
  transition: border-color .2s, box-shadow .2s, background .2s;
}
.select-proton:focus {
  outline: none;
  border-color: color-mix(in oklab, var(--accent) 48%, transparent);
  box-shadow: 0 0 0 3px color-mix(in oklab, var(--accent) 22%, transparent);
}
.select-proton option { background: #0B0F14; color: var(--text); }

/* --------- Custom Dropdown --------- */
.dropdown { position: relative; }
.dropdown-toggle { cursor: pointer; }
.dropdown-menu {
  position: absolute; right: 0; top: calc(100% + 8px); min-width: 220px; z-index: 50;
  padding: 8px;
  border-radius: 14px;
  background: color-mix(in oklab, white 6%, transparent);
  border: 1px solid color-mix(in oklab, white 12%, transparent);
  box-shadow:
    0 20px 40px color-mix(in oklab, black 60%, transparent),
    0 0 0 1px color-mix(in oklab, white 10%, transparent) inset;
  backdrop-filter: blur(10px);
  transform-origin: top right;
  transform: scale(.98);
  opacity: 0;
  pointer-events: none;
  transition: transform .16s ease, opacity .16s ease;
}
.dropdown.open .dropdown-menu {
  transform: scale(1);
  opacity: 1;
  pointer-events: auto;
}
.menu-item {
  display: flex; gap: .6rem; align-items: center;
  padding: 10px 12px; border-radius: 10px; cursor: pointer;
  color: var(--text);
  transition: background .15s ease, color .15s ease;
}
.menu-item:hover { background: color-mix(in oklab, var(--accent) 14%, transparent); }
.menu-sep {
  height: 1px; margin: 6px 8px;
  background: color-mix(in oklab, white 14%, transparent);
  opacity: .4;
}

/* --------- Checkbox / Radio / Switch --------- */
.control {
  --sz: 18px;
  inline-size: var(--sz); block-size: var(--sz);
  border-radius: 6px;
  display: inline-grid; place-items: center;
  background: color-mix(in oklab, white 3%, transparent);
  border: 1px solid color-mix(in oklab, white 16%, transparent);
  transition: border-color .2s, background .2s, box-shadow .2s;
}
input[type="checkbox"].control-input,
input[type="radio"].control-input {
  position: absolute; opacity: 0; pointer-events: none;
}

.checkbox-proton { position: relative; display: inline-grid; gap: .6rem; grid-auto-flow: column; align-items: center; }
.checkbox-proton .control::after {
  content: ""; inline-size: 10px; block-size: 10px;
  border-radius: 3px; transform: scale(0); transition: transform .14s ease;
  background: linear-gradient(90deg, var(--accent), var(--violet));
}
.checkbox-proton input:focus + .control {
  box-shadow: 0 0 0 3px color-mix(in oklab, var(--accent) 22%, transparent);
}
.checkbox-proton input:checked + .control {
  border-color: color-mix(in oklab, var(--accent) 60%, transparent);
  background: color-mix(in oklab, var(--accent) 12%, transparent);
}
.checkbox-proton input:checked + .control::after { transform: scale(1); }

/* Radio variation: add .radio-proton on wrapper */
.radio-proton .control { border-radius: 50%; }
.radio-proton .control::after { border-radius: 50%; }

/* Switch */
.switch-proton {
  --w: 44px; --h: 24px;
  position: relative; width: var(--w); height: var(--h);
  background: color-mix(in oklab, white 6%, transparent);
  border: 1px solid color-mix(in oklab, white 14%, transparent);
  border-radius: 999px;
  transition: background .2s, border-color .2s;
}
.switch-proton input { position: absolute; inset: 0; opacity: 0; }
.switch-proton .track {
  position: absolute; inset: 0; border-radius: inherit;
  pointer-events: none;
}
.switch-proton .knob {
  position: absolute; top: 2px; left: 2px; width: 20px; height: 20px; border-radius: 999px;
  background: linear-gradient(90deg, var(--accent), var(--violet));
  box-shadow: 0 4px 14px color-mix(in oklab, black 60%, transparent);
  transition: left .2s ease;
}
.switch-proton input:checked ~ .knob { left: calc(var(--w) - 22px); }
.switch-proton input:checked ~ .track {
  background: color-mix(in oklab, var(--accent) 18%, transparent);
  border-color: color-mix(in oklab, var(--accent) 45%, transparent);
}

/* --------- Tooltip --------- */
.tooltip-proton { position: relative; }
.tooltip-proton[data-tip]::after {
  content: attr(data-tip);
  position: absolute; left: 50%; bottom: calc(100% + 10px); translate: -50% 0;
  white-space: nowrap; padding: 8px 10px; border-radius: 10px; font-size: .875rem;
  color: var(--text);
  background: color-mix(in oklab, black 70%, transparent);
  border: 1px solid color-mix(in oklab, white 12%, transparent);
  opacity: 0; transform: translateY(4px); pointer-events: none;
  transition: opacity .12s ease, transform .12s ease;
}
.tooltip-proton:hover::after { opacity: 1; transform: translateY(0); }

/* --------- Modal --------- */
.modal-proton { position: fixed; inset: 0; display: grid; place-items: center; z-index: 60; }
.modal-proton .backdrop {
  position: absolute; inset: 0; backdrop-filter: blur(8px);
  background: color-mix(in oklab, black 55%, transparent);
}
.modal-proton .panel {
  position: relative; width: min(92vw, 720px); padding: 20px; border-radius: 16px;
  background: color-mix(in oklab, white 6%, transparent);
  border: 1px solid color-mix(in oklab, white 12%, transparent);
  box-shadow: 0 30px 80px color-mix(in oklab, black 65%, transparent);
}

/* --------- Motion Preference --------- */
@media (prefers-reduced-motion: reduce) {
  * { transition: none !important; animation: none !important; }
}

/* --------- Fallbacks for browsers without color-mix --------- */
@supports not (background: color-mix(in oklab, white 5%, transparent)) {
  :root {
    --sb-track: rgba(255,255,255,0.06);
    --sb-thumb: rgba(0,224,255,0.55);
    --sb-thumb-hover: rgba(139,92,246,0.6);
  }
  .glass { background: rgba(255,255,255,0.07); border-color: rgba(255,255,255,0.12); }
  .card { background: rgba(255,255,255,0.05); border-color: rgba(255,255,255,0.12); }
  .btn { border-color: rgba(255,255,255,0.14); background: rgba(255,255,255,0.04); }
  .btn-ghost { background: rgba(255,255,255,0.04); }
  .btn-ghost:hover { background: rgba(255,255,255,0.08); }
  .input-proton { background: rgba(255,255,255,0.05); border-color: rgba(255,255,255,0.12); }
  .input-proton:focus { box-shadow: 0 0 0 3px rgba(0,224,255,0.22); border-color: rgba(0,224,255,0.48); }
  .select-proton { border-color: rgba(255,255,255,0.12); }
  .dropdown-menu {
    background: rgba(255,255,255,0.06);
    border-color: rgba(255,255,255,0.12);
    box-shadow: 0 20px 40px rgba(0,0,0,0.6), inset 0 0 0 1px rgba(255,255,255,0.10);
  }
  .menu-item:hover { background: rgba(0,224,255,0.14); }
  .control { background: rgba(255,255,255,0.03); border-color: rgba(255,255,255,0.16); }
  .checkbox-proton input:focus + .control { box-shadow: 0 0 0 3px rgba(0,224,255,0.22); }
  .checkbox-proton input:checked + .control {
    border-color: rgba(0,224,255,0.60);
    background: rgba(0,224,255,0.12);
  }
  .switch-proton { background: rgba(255,255,255,0.06); border-color: rgba(255,255,255,0.14); }
  .tooltip-proton[data-tip]::after {
    background: rgba(0,0,0,0.7);
    border-color: rgba(255,255,255,0.12);
  }
  .modal-proton .panel {
    background: rgba(255,255,255,0.06);
    border-color: rgba(255,255,255,0.12);
  }
}

/* =========================
   Hover & Selection FX Add-on
   ========================= */

/* 텍스트 드래그(선택) 색상 */
::selection{
  background: color-mix(in oklab, var(--accent) 40%, transparent);
  color: #0B0F14;
}
::-moz-selection{
  background: color-mix(in oklab, var(--accent) 40%, transparent);
  color: #0B0F14;
}

/* 공통 Hover/Active 유틸 */
.hover-lift{ transition: transform .16s ease, box-shadow .2s ease; }
.hover-lift:hover{ transform: translateY(-2px); }
.pressable{ transition: transform .08s ease; }
.pressable:active{ transform: translateY(0) scale(.98); }

.hover-glow{
  transition: box-shadow .2s ease, border-color .2s ease, background .2s ease, transform .16s ease;
}
.hover-glow:hover{
  box-shadow:
    0 0 0 1px color-mix(in oklab, var(--accent) 32%, transparent),
    0 10px 30px color-mix(in oklab, var(--accent) 18%, transparent);
}

/* Card 인터랙션 (opt-in) */
.card.hoverable{
  position: relative;
  overflow: hidden;
  transition: transform .16s ease, box-shadow .25s ease, border-color .2s ease, background .2s ease;
}
.card.hoverable:hover{
  transform: translateY(-3px);
  border-color: color-mix(in oklab, var(--accent) 26%, transparent);
  box-shadow:
    0 12px 40px color-mix(in oklab, black 60%, transparent),
    0 0 0 1px color-mix(in oklab, var(--accent) 24%, transparent) inset;
}
.card.hoverable::after{
  /* 상단 라이트 스윕 */
  content:""; position:absolute; inset:auto -40% 70% -40%;
  background: linear-gradient(90deg,
    transparent,
    color-mix(in oklab, var(--accent) 26%, transparent),
    transparent);
  transform: translateY(-30%) rotate(2deg);
  opacity:.0; pointer-events:none;
  transition: opacity .25s ease, transform .25s ease;
}
.card.hoverable:hover::after{ opacity:.8; transform: translateY(0) rotate(2deg); }

/* 버튼 상태 고도화 */
.btn{
  position: relative;
  isolation: isolate;
}
.btn:hover{
  box-shadow:
    0 6px 20px color-mix(in oklab, var(--accent) 16%, transparent),
    0 0 0 1px color-mix(in oklab, white 10%, transparent) inset;
}
.btn-primary:hover{
  box-shadow:
    0 10px 28px color-mix(in oklab, var(--accent) 30%, transparent),
    0 0 0 1px color-mix(in oklab, #0B0F14 60%, transparent) inset;
  filter: saturate(1.05);
}
.btn:disabled,
.btn[aria-disabled="true"]{
  opacity:.6; cursor:not-allowed;
  transform:none; box-shadow:none !important;
}

/* 입력류 : hover/focus/invalid/valid */
.input-proton:hover{
  border-color: color-mix(in oklab, var(--accent) 22%, transparent);
  background: color-mix(in oklab, white 6%, transparent);
}
.input-proton:focus{
  border-color: color-mix(in oklab, var(--accent) 52%, transparent);
  box-shadow: 0 0 0 3px color-mix(in oklab, var(--accent) 24%, transparent);
}
.input-proton:invalid{
  border-color: color-mix(in oklab, #FF5A5F 55%, transparent);
  box-shadow: 0 0 0 3px color-mix(in oklab, #FF5A5F 22%, transparent);
}
.input-proton:valid{
  border-color: color-mix(in oklab, #22C55E 55%, transparent);
}

/* 셀렉트 : hover/active */
.select-proton:hover{
  border-color: color-mix(in oklab, var(--accent) 22%, transparent);
  background:
    linear-gradient(90deg,
      color-mix(in oklab, white 7%, transparent),
      color-mix(in oklab, white 5%, transparent)) !important;
}
.select-proton:active{
  transform: translateY(0); /* 모바일 탭 깜빡임 방지용 noop */
}

/* 드롭다운 메뉴 hover/active/선택 표시 */
.menu-item:hover{
  background: color-mix(in oklab, var(--accent) 16%, transparent);
}
.menu-item:active{
  background: color-mix(in oklab, var(--accent) 26%, transparent);
}
.menu-item.is-active{
  background: color-mix(in oklab, var(--accent) 22%, transparent);
  box-shadow: inset 0 0 0 1px color-mix(in oklab, var(--accent) 40%, transparent);
}

/* 체크박스/라디오 : hover 링 */
.checkbox-proton:hover .control,
.radio-proton:hover .control{
  border-color: color-mix(in oklab, var(--accent) 32%, transparent);
  box-shadow: 0 0 0 2px color-mix(in oklab, var(--accent) 18%, transparent);
}

/* 스위치 : hover 광택 */
.switch-proton{ transition: background .2s, border-color .2s, box-shadow .2s; }
.switch-proton:hover{
  box-shadow: 0 0 0 3px color-mix(in oklab, var(--accent) 16%, transparent);
}

/* 네비 링크 언더라인 애니메이션 (opt-in) */
.nav-underline{
  position: relative; display:inline-block;
}
.nav-underline::after{
  content:""; position:absolute; left:0; right:100%; bottom:-3px; height:2px;
  background: linear-gradient(90deg, var(--accent), var(--violet));
  transition: right .18s ease;
}
.nav-underline:hover::after,
.nav-underline[aria-current="page"]::after{
  right:0;
}

/* 테이블 행 hover (opt-in) */
.table-proton tbody tr{
  transition: background .12s ease, box-shadow .12s ease;
}
.table-proton tbody tr:hover{
  background: color-mix(in oklab, white 6%, transparent);
  box-shadow: inset 0 0 0 1px color-mix(in oklab, white 10%, transparent);
}

/* 리스트 선택 유틸 (aria-selected / data-selected) */
[aria-selected="true"],
[data-selected="true"]{
  background: color-mix(in oklab, var(--accent) 18%, transparent);
  box-shadow: inset 0 0 0 1px color-mix(in oklab, var(--accent) 36%, transparent);
}

/* 스켈레톤 로더 (opt-in) */
.skeleton{
  position: relative; overflow: hidden;
  background: color-mix(in oklab, white 6%, transparent);
  border: 1px solid color-mix(in oklab, white 10%, transparent);
  border-radius: 10px;
}
.skeleton::after{
  content:""; position:absolute; inset:0;
  transform: translateX(-100%);
  background: linear-gradient(90deg,
    transparent,
    color-mix(in oklab, white 12%, transparent),
    transparent);
  animation: skshine 1.2s linear infinite;
}
@keyframes skshine{
  to{ transform: translateX(100%); }
}

/* Ripple 효과 (opt-in, 버튼/아이템에 data-ripple) */
[data-ripple]{ position: relative; overflow: hidden; }
[data-ripple]:after{
  content:""; position:absolute; inset:auto; width:0; height:0; border-radius:999px;
  background: color-mix(in oklab, var(--accent) 30%, transparent);
  opacity:.0; pointer-events:none;
  transform: translate(-50%,-50%);
}
[data-ripple]:active:after{
  /* 간단한 중앙 리플 (JS 없이) */
  left:50%; top:50%; width:180px; height:180px; opacity:.25;
  transition: width .3s ease, height .3s ease, opacity .6s ease;
}

/* 모션 축소 환경 보정 */
@media (prefers-reduced-motion: reduce){
  .hover-lift, .hover-glow, .card.hoverable, .btn, .menu-item, .table-proton tbody tr{
    transition: none !important;
  }
  .skeleton::after{ animation: none !important; }
}

/* Modal enter/exit utilities (optional) */
.modal-proton .backdrop { transition: opacity .2s ease-out; }
.modal-proton .panel { transition: opacity .2s ease-out, transform .2s ease-out; }

.modal-proton[data-show="false"] .backdrop { opacity: 0; }
.modal-proton[data-show="true"]  .backdrop { opacity: 1; }

.modal-proton[data-show="false"] .panel { opacity: 0; transform: translateY(-8px) scale(.98); }
.modal-proton[data-show="true"]  .panel { opacity: 1; transform: translateY(0) scale(1); }